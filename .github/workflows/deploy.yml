# This is a basic workflow to help you get started with Actions
name: Deploy

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch
on:
    push:
        branches:
            - taller-23-abr

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
    # This workflow contains a single job called "build":
    build:
        # The type of runner that the job will run on
        runs-on: ubuntu-latest

        # Steps represent a sequence of tasks that will be executed as part of the job
        steps:
            # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
            - uses: actions/checkout@v1

            # Runs a single command using the runners shell
            - name: Build
              env:
                  VUE_APP_FIREBASE_API_KEY: ${{secrets.VUE_APP_FIREBASE_API_KEY}}
                  VUE_APP_FIREBASE_AUTH_DOMAIN: ${{secrets.VUE_APP_FIREBASE_AUTH_DOMAIN}}
                  VUE_APP_FIREBASE_PROJECT_ID: ${{secrets.VUE_APP_FIREBASE_PROJECT_ID}}
                  VUE_APP_FIREBASE_STORAGE_BUCKET: ${{secrets.VUE_APP_FIREBASE_STORAGE_BUCKET}}
                  VUE_APP_FIREBASE_APP_ID: ${{secrets.VUE_APP_FIREBASE_APP_ID}}
              run: |
                  npm install
                  npm run build
            # Delpoy into my Firebase container
            - name: Firebase Deploy
              run: |
                  sudo npm install -g firebase-tools
                  firebase deploy --token ${{secrets.FIREBASE_TOKEN}}
